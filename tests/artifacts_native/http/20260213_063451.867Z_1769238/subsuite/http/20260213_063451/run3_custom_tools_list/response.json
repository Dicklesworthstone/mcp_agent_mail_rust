{"jsonrpc":"2.0","result":{"tools":[{"name":"ensure_project","description":"Idempotently create or ensure a project exists for the given human key.","inputSchema":{"type":"object","properties":{"identity_mode":{"type":"string"},"human_key":{"type":"string"}},"required":["human_key"]}},{"name":"register_agent","description":"Create or update an agent identity within a project.","inputSchema":{"type":"object","properties":{"project_key":{"type":"string"},"model":{"type":"string"},"name":{"type":"string"},"program":{"type":"string"},"attachments_policy":{"type":"string"},"task_description":{"type":"string"}},"required":["project_key","program","model"]}},{"name":"create_agent_identity","description":"Create a new, unique agent identity and persist its profile to Git.","inputSchema":{"type":"object","properties":{"task_description":{"type":"string"},"attachments_policy":{"type":"string"},"model":{"type":"string"},"project_key":{"type":"string"},"name_hint":{"type":"string"},"program":{"type":"string"}},"required":["project_key","program","model"]}},{"name":"whois","description":"Return enriched profile details for an agent.","inputSchema":{"type":"object","properties":{"project_key":{"type":"string"},"agent_name":{"type":"string"},"commit_limit":{"type":"integer"},"include_recent_commits":{"type":"boolean"}},"required":["project_key","agent_name"]}},{"name":"send_message","description":"Send a Markdown message to one or more recipients.","inputSchema":{"type":"object","properties":{"thread_id":{"type":"string"},"attachment_paths":{"type":"array","items":{"type":"string"}},"convert_images":{"type":"boolean"},"project_key":{"type":"string"},"to":{"type":"array","items":{"type":"string"}},"body_md":{"type":"string"},"subject":{"type":"string"},"importance":{"type":"string"},"sender_name":{"type":"string"},"bcc":{"type":"array","items":{"type":"string"}},"auto_contact_if_blocked":{"type":"boolean"},"cc":{"type":"array","items":{"type":"string"}},"ack_required":{"type":"boolean"}},"required":["project_key","sender_name","to","subject","body_md"]}},{"name":"reply_message","description":"Reply to an existing message, preserving thread context.","inputSchema":{"type":"object","properties":{"cc":{"type":"array","items":{"type":"string"}},"sender_name":{"type":"string"},"project_key":{"type":"string"},"message_id":{"type":"integer"},"body_md":{"type":"string"},"bcc":{"type":"array","items":{"type":"string"}},"to":{"type":"array","items":{"type":"string"}},"subject_prefix":{"type":"string"}},"required":["project_key","message_id","sender_name","body_md"]}},{"name":"fetch_inbox","description":"Retrieve recent messages for an agent without mutating state.","inputSchema":{"type":"object","properties":{"since_ts":{"type":"string"},"agent_name":{"type":"string"},"limit":{"type":"integer"},"urgent_only":{"type":"boolean"},"include_bodies":{"type":"boolean"},"project_key":{"type":"string"}},"required":["project_key","agent_name"]}},{"name":"mark_message_read","description":"Mark a specific message as read for the given agent.","inputSchema":{"type":"object","properties":{"project_key":{"type":"string"},"agent_name":{"type":"string"},"message_id":{"type":"integer"}},"required":["project_key","agent_name","message_id"]}},{"name":"acknowledge_message","description":"Acknowledge a message addressed to an agent (and mark as read).","inputSchema":{"type":"object","properties":{"project_key":{"type":"string"},"agent_name":{"type":"string"},"message_id":{"type":"integer"}},"required":["project_key","agent_name","message_id"]}},{"name":"request_contact","description":"Request contact approval to message another agent.","inputSchema":{"type":"object","properties":{"to_agent":{"type":"string"},"ttl_seconds":{"type":"integer"},"from_agent":{"type":"string"},"project_key":{"type":"string"},"to_project":{"type":"string"},"reason":{"type":"string"},"program":{"type":"string"},"model":{"type":"string"},"register_if_missing":{"type":"boolean"},"task_description":{"type":"string"}},"required":["project_key","from_agent","to_agent"]}},{"name":"respond_contact","description":"Approve or deny a contact request.","inputSchema":{"type":"object","properties":{"accept":{"type":"boolean"},"ttl_seconds":{"type":"integer"},"from_project":{"type":"string"},"project_key":{"type":"string"},"to_agent":{"type":"string"},"from_agent":{"type":"string"}},"required":["project_key","to_agent","from_agent","accept"]}},{"name":"list_contacts","description":"List contact links for an agent in a project.","inputSchema":{"type":"object","properties":{"agent_name":{"type":"string"},"project_key":{"type":"string"}},"required":["project_key","agent_name"]}},{"name":"set_contact_policy","description":"Set contact policy for an agent: open | auto | contacts_only | block_all.","inputSchema":{"type":"object","properties":{"project_key":{"type":"string"},"agent_name":{"type":"string"},"policy":{"type":"string"}},"required":["project_key","agent_name","policy"]}},{"name":"file_reservation_paths","description":"Request advisory file reservations on project-relative paths/globs.","inputSchema":{"type":"object","properties":{"agent_name":{"type":"string"},"ttl_seconds":{"type":"integer"},"paths":{"type":"array","items":{"type":"string"}},"reason":{"type":"string"},"project_key":{"type":"string"},"exclusive":{"type":"boolean"}},"required":["project_key","agent_name","paths"]}},{"name":"release_file_reservations","description":"Release active file reservations held by an agent.","inputSchema":{"type":"object","properties":{"project_key":{"type":"string"},"file_reservation_ids":{"type":"array","items":{"type":"integer"}},"agent_name":{"type":"string"},"paths":{"type":"array","items":{"type":"string"}}},"required":["project_key","agent_name"]}},{"name":"renew_file_reservations","description":"Extend expiry for active file reservations.","inputSchema":{"type":"object","properties":{"extend_seconds":{"type":"integer"},"file_reservation_ids":{"type":"array","items":{"type":"integer"}},"project_key":{"type":"string"},"agent_name":{"type":"string"},"paths":{"type":"array","items":{"type":"string"}}},"required":["project_key","agent_name"]}},{"name":"force_release_file_reservation","description":"Force-release a stale file reservation after inactivity heuristics.","inputSchema":{"type":"object","properties":{"agent_name":{"type":"string"},"file_reservation_id":{"type":"integer"},"notify_previous":{"type":"boolean"},"note":{"type":"string"},"project_key":{"type":"string"}},"required":["project_key","agent_name","file_reservation_id"]}},{"name":"install_precommit_guard","description":"Install pre-commit guard for file reservation enforcement.","inputSchema":{"type":"object","properties":{"project_key":{"type":"string"},"code_repo_path":{"type":"string"}},"required":["project_key","code_repo_path"]}},{"name":"uninstall_precommit_guard","description":"Uninstall pre-commit guard from a repository.","inputSchema":{"type":"object","properties":{"code_repo_path":{"type":"string"}},"required":["code_repo_path"]}},{"name":"search_messages","description":"Full-text search over subject and body for a project.","inputSchema":{"type":"object","properties":{"limit":{"type":"integer"},"project_key":{"type":"string"},"query":{"type":"string"}},"required":["project_key","query"]}},{"name":"summarize_thread","description":"Extract participants, key points, and action items for threads.","inputSchema":{"type":"object","properties":{"per_thread_limit":{"type":"integer"},"llm_mode":{"type":"boolean"},"project_key":{"type":"string"},"thread_id":{"type":"string"},"include_examples":{"type":"boolean"},"llm_model":{"type":"string"}},"required":["project_key","thread_id"]}},{"name":"macro_start_session","description":"Boot a project session: ensure project, register agent, reserve files, fetch inbox.","inputSchema":{"type":"object","properties":{"program":{"type":"string"},"agent_name":{"type":"string"},"file_reservation_paths":{"type":"array","items":{"type":"string"}},"file_reservation_ttl_seconds":{"type":"integer"},"inbox_limit":{"type":"integer"},"task_description":{"type":"string"},"human_key":{"type":"string"},"model":{"type":"string"},"file_reservation_reason":{"type":"string"}},"required":["human_key","program","model"]}},{"name":"macro_prepare_thread","description":"Align with an existing thread: register agent, summarize thread, fetch inbox.","inputSchema":{"type":"object","properties":{"program":{"type":"string"},"model":{"type":"string"},"include_examples":{"type":"boolean"},"agent_name":{"type":"string"},"task_description":{"type":"string"},"include_inbox_bodies":{"type":"boolean"},"inbox_limit":{"type":"integer"},"llm_model":{"type":"string"},"thread_id":{"type":"string"},"project_key":{"type":"string"},"llm_mode":{"type":"boolean"},"register_if_missing":{"type":"boolean"}},"required":["project_key","thread_id","program","model"]}},{"name":"macro_file_reservation_cycle","description":"Reserve files and optionally release them at the end.","inputSchema":{"type":"object","properties":{"ttl_seconds":{"type":"integer"},"exclusive":{"type":"boolean"},"reason":{"type":"string"},"auto_release":{"type":"boolean"},"project_key":{"type":"string"},"paths":{"type":"array","items":{"type":"string"}},"agent_name":{"type":"string"}},"required":["project_key","agent_name","paths"]}},{"name":"macro_contact_handshake","description":"Request contact + optionally approve + send welcome message.","inputSchema":{"type":"object","properties":{"ttl_seconds":{"type":"integer"},"model":{"type":"string"},"welcome_body":{"type":"string"},"project_key":{"type":"string"},"requester":{"type":"string"},"auto_accept":{"type":"boolean"},"agent_name":{"type":"string"},"to_project":{"type":"string"},"register_if_missing":{"type":"boolean"},"welcome_subject":{"type":"string"},"thread_id":{"type":"string"},"to_agent":{"type":"string"},"reason":{"type":"string"},"target":{"type":"string"},"program":{"type":"string"},"task_description":{"type":"string"}},"required":["project_key"]}},{"name":"ensure_product","description":"Ensure a Product exists. If not, create one.","inputSchema":{"type":"object","properties":{"product_key":{"type":"string"},"name":{"type":"string"}},"required":[]}},{"name":"products_link","description":"Link a project into a product (idempotent).","inputSchema":{"type":"object","properties":{"project_key":{"type":"string"},"product_key":{"type":"string"}},"required":["product_key","project_key"]}},{"name":"search_messages_product","description":"Full-text search across all projects linked to a product.","inputSchema":{"type":"object","properties":{"query":{"type":"string"},"limit":{"type":"integer"},"product_key":{"type":"string"}},"required":["product_key","query"]}},{"name":"fetch_inbox_product","description":"Retrieve recent messages for an agent across all projects linked to a product.","inputSchema":{"type":"object","properties":{"product_key":{"type":"string"},"limit":{"type":"integer"},"urgent_only":{"type":"boolean"},"include_bodies":{"type":"boolean"},"agent_name":{"type":"string"},"since_ts":{"type":"string"}},"required":["product_key","agent_name"]}},{"name":"summarize_thread_product","description":"Summarize a thread across all projects linked to a product.","inputSchema":{"type":"object","properties":{"llm_model":{"type":"string"},"per_thread_limit":{"type":"integer"},"thread_id":{"type":"string"},"llm_mode":{"type":"boolean"},"product_key":{"type":"string"},"include_examples":{"type":"boolean"}},"required":["product_key","thread_id"]}},{"name":"acquire_build_slot","description":"Acquire a build slot (advisory), optionally exclusive.","inputSchema":{"type":"object","properties":{"exclusive":{"type":"boolean"},"project_key":{"type":"string"},"slot":{"type":"string"},"ttl_seconds":{"type":"integer"},"agent_name":{"type":"string"}},"required":["project_key","agent_name","slot"]}},{"name":"renew_build_slot","description":"Extend expiry for an existing build slot lease.","inputSchema":{"type":"object","properties":{"agent_name":{"type":"string"},"slot":{"type":"string"},"extend_seconds":{"type":"integer"},"project_key":{"type":"string"}},"required":["project_key","agent_name","slot"]}},{"name":"release_build_slot","description":"Release a build slot lease (non-destructive).","inputSchema":{"type":"object","properties":{"project_key":{"type":"string"},"agent_name":{"type":"string"},"slot":{"type":"string"}},"required":["project_key","agent_name","slot"]}}]},"id":1}