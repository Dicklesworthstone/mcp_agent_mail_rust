{"jsonrpc":"2.0","result":{"contents":[{"uri":"resource://tooling/directory","mimeType":"text/plain","text":"{\"generated_at\":null,\"metrics_uri\":\"resource://tooling/metrics\",\"output_formats\":{\"default\":\"json\",\"tool_param\":\"format\",\"resource_query\":\"format\",\"values\":[\"json\",\"toon\"],\"toon_envelope\":{\"format\":\"toon\",\"data\":\"<TOON>\",\"meta\":{\"requested\":\"toon\"}}},\"clusters\":[{\"name\":\"Infrastructure & Workspace Setup\",\"purpose\":\"Bootstrap coordination and guardrails before agents begin editing.\",\"tools\":[{\"name\":\"health_check\",\"summary\":\"Report environment and HTTP wiring so orchestrators confirm connectivity.\",\"use_when\":\"Beginning a session or during incident response triage.\",\"related\":[\"ensure_project\"],\"expected_frequency\":\"Once per agent session or when connectivity is in doubt.\",\"required_capabilities\":[\"infrastructure\"],\"usage_examples\":[{\"hint\":\"Pre-flight\",\"sample\":\"health_check()\"}],\"capabilities\":[\"infrastructure\"],\"complexity\":\"low\"},{\"name\":\"ensure_project\",\"summary\":\"Ensure project slug, schema, and archive exist for a shared repo identifier.\",\"use_when\":\"First call against a repo or when switching projects.\",\"related\":[\"register_agent\",\"file_reservation_paths\"],\"expected_frequency\":\"Whenever a new repo/path is encountered.\",\"required_capabilities\":[\"infrastructure\",\"storage\"],\"usage_examples\":[{\"hint\":\"First action\",\"sample\":\"ensure_project(human_key='/abs/path/backend')\"}],\"capabilities\":[\"infrastructure\",\"storage\"],\"complexity\":\"low\"}]},{\"name\":\"Identity & Directory\",\"purpose\":\"Register agents, mint unique identities, and inspect directory metadata.\",\"tools\":[{\"name\":\"register_agent\",\"summary\":\"Upsert an agent profile and refresh last_active_ts for a known persona.\",\"use_when\":\"Resuming an identity or updating program/model/task metadata.\",\"related\":[\"create_agent_identity\",\"whois\"],\"expected_frequency\":\"At the start of each automated work session.\",\"required_capabilities\":[\"identity\"],\"usage_examples\":[{\"hint\":\"Resume persona\",\"sample\":\"register_agent(project_key='/abs/path/backend', program='codex', model='gpt5')\"}],\"capabilities\":[\"identity\"],\"complexity\":\"medium\"}]},{\"name\":\"Messaging Lifecycle\",\"purpose\":\"Send, receive, and acknowledge threaded Markdown mail.\",\"tools\":[{\"name\":\"send_message\",\"summary\":\"Deliver a new message with attachments, WebP conversion, and policy enforcement.\",\"use_when\":\"Starting new threads or broadcasting plans across projects.\",\"related\":[\"reply_message\",\"request_contact\"],\"expected_frequency\":\"Frequentâ€”core write operation.\",\"required_capabilities\":[\"messaging\",\"write\"],\"usage_examples\":[{\"hint\":\"New plan\",\"sample\":\"send_message(project_key='backend', sender_name='GreenCastle', to=['BlueLake'], subject='Plan', body_md='...')\"}],\"capabilities\":[\"messaging\",\"write\"],\"complexity\":\"medium\"},{\"name\":\"fetch_inbox\",\"summary\":\"Poll recent messages for an agent with filters (urgent_only, since_ts).\",\"use_when\":\"After each work unit to ingest coordination updates.\",\"related\":[\"mark_message_read\",\"acknowledge_message\"],\"expected_frequency\":\"Frequent polling in agent loops.\",\"required_capabilities\":[\"messaging\",\"read\"],\"usage_examples\":[{\"hint\":\"Poll\",\"sample\":\"fetch_inbox(project_key='backend', agent_name='BlueLake', since_ts='2025-10-24T00:00:00Z')\"}],\"capabilities\":[\"messaging\",\"read\"],\"complexity\":\"medium\"},{\"name\":\"acknowledge_message\",\"summary\":\"Set read_ts and ack_ts so senders know action items landed.\",\"use_when\":\"Responding to ack_required messages.\",\"related\":[\"mark_message_read\"],\"expected_frequency\":\"Each time a message requests acknowledgement.\",\"required_capabilities\":[\"ack\",\"messaging\"],\"usage_examples\":[{\"hint\":\"Ack\",\"sample\":\"acknowledge_message(project_key='backend', agent_name='BlueLake', message_id=42)\"}],\"capabilities\":[\"ack\",\"messaging\"],\"complexity\":\"medium\"}]}],\"playbooks\":[{\"workflow\":\"Kick off new agent session (macro)\",\"sequence\":[\"health_check\",\"macro_start_session\",\"summarize_thread\"]},{\"workflow\":\"Kick off new agent session (manual)\",\"sequence\":[\"health_check\",\"ensure_project\",\"register_agent\",\"fetch_inbox\"]},{\"workflow\":\"Start focused refactor\",\"sequence\":[\"ensure_project\",\"file_reservation_paths\",\"send_message\",\"fetch_inbox\",\"acknowledge_message\"]},{\"workflow\":\"Join existing discussion\",\"sequence\":[\"macro_prepare_thread\",\"reply_message\",\"acknowledge_message\"]},{\"workflow\":\"Manage contact approvals\",\"sequence\":[\"set_contact_policy\",\"request_contact\",\"respond_contact\",\"send_message\"]}]}"}]},"id":1}